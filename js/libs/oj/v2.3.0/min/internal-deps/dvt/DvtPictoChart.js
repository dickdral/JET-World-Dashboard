/**
 * Copyright (c) 2014, 2016, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(['./DvtToolkit'], function(dvt) {
  // Internal use only.  All APIs and functionality are subject to change at any time.

var p;function aa(a,b){0==a.indexOf("dvt.")&&(a=a.substring(4));var c=a.split("."),d=eval("dvt");c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)c.length||void 0===b?d=d[e]?d[e]:d[e]={}:d[e]=b}Math.floor(2147483648*Math.random()).toString(36);
(function(a){function b(c,d,e,f,h,k,l){b.C.Init.call(this,c.u(),"none"==d?null:d,a.j.vf,e,f,h,k,null,!0,l);this.pj=c}function c(a){this.Init(a)}function d(a,b){this.Init(a,b)}function e(a,b,c,d,f,h,k,l,u,D){e.C.Init.call(this,a.u(),b,c,d,f,null,h,k,l,u,D);this.pj=a}function f(){this.Init({alta:f.oh})}function h(a){this.Init(a.u(),a.dispatchEvent,a);this.pj=a}function k(a){this.pj=a}a.Ni=function(a,b,c){this.Init(a,b,c)};a.v.F(a.Ni,a.Oe);a.Ni.newInstance=function(b,c,d){return new a.Ni(b,c,d)};a.Ni.prototype.Init=
function(b,d,e){a.Ni.C.Init.call(this,b,d,e);this.I=new h(this);this.I.Nf(this);a.B.Wa()||this.I.ms(new c(this.I));this.$g=new f;this.fc=[]};a.Ni.prototype.CH=function(b,c){if(!b||!c){var d=l.xp(this,b,c);this.Ppa=d;b||(b=d.items?d.BSa*d.Sda:0);c||(c=d.items?d.LXa*d.uga:0)}return new a.dj(b,c)};a.Ni.prototype.ta=function(b,c,d){this.Oj=this.Fa;var e=this.zu,f=this.wb?this.wb:0,h=this.Nb?this.Nb:0;this.I.we();this.fc=[];this.zu=[];this.Ppa=null;this.kn&&(this.Fa.removeChild(this.kn),this.kn=null);
this.Gq();this.Df(b);var k=this.u();if(c||d)this.wb=c,this.Nb=d;else if(k.Rb.style.display="block",c=this.CH(),a.J.b6(k,c.a,c.b),d=a.J.Ova(k),c.a==d.a&&c.b!=d.b?(this.Nb=d.b,c=this.CH(null,this.Nb),a.J.b6(k,c.a,this.Nb),this.wb=a.J.Ova(k).a):c.a!=d.a&&c.b==d.b?(this.wb=d.a,c=this.CH(this.wb,null),a.J.b6(k,this.wb,c.b),this.Nb=a.J.Ova(k).b):(this.wb=d.a,this.Nb=d.b),this.wb!=c.a||this.Nb!=c.b)this.Ppa=null;this.Fa=new a.la(k);this.A(this.Fa);l.ta(this,this.Fa,new a.Z(0,0,this.wb,this.Nb),this.Ppa);
this.Oj?"none"!=this.W.animationOnDataChange&&b&&(b=new a.Bq(k,null),b.No(e,this.zu),this.Yb=b.Iw()):this.Yb=this.mbb();this.Yb?(a.J.b6(k,Math.max(f,this.wb),Math.max(h,this.Nb)),this.I.Wj(this),this.kn&&this.Fa.removeChild(this.kn),this.Yb.rg(this.$ba,this),this.Yb.play()):this.$ba()};a.Ni.prototype.Df=function(b){b?this.W=this.$g.un(b):this.W||(this.W=this.kG());a.B.vk()||(this.W.animationOnDisplay="none",this.W.animationOnDataChange="none");b=this.W.selectionMode;this.ad="single"==b?new a.Tc(a.Tc.nz):
"multiple"==b?new a.Tc(a.Tc.mz):null;this.I.VA(this.ad)};a.Ni.prototype.$ba=function(){this.Oj&&(this.removeChild(this.Oj),this.Oj.ya(),this.Oj=null);this.Yb&&(this.I.Nf(this),this.kn&&this.Fa.A(this.kn));a.J.b6(this.u(),this.wb,this.Nb);for(var b,c=0;c<this.fc.length&&(b=this.fc[c],"none"==b.Pc());c++);this.I.hv(b);this.ad&&this.ad.Gt(this.W.selection,this.fc);a.zh.df(this.W.highlightedCategories,this.fc,"any"==this.W.highlightMatch);this.ur();this.jm||this.Eq();this.Yb=null;this.jm=!1};a.Ni.prototype.tya=
function(a){this.fc=a};a.Ni.prototype.sl=function(){return this.fc};a.Ni.prototype.Xrb=function(a){this.zu.push(a)};a.Ni.prototype.Wrb=function(a){this.kn=a};a.Ni.prototype.Xob=function(){for(var a=0,b=0;b<this.fc.length;b++)a+=this.fc[b].getCount();return a};a.Ni.prototype.ob=function(){return a.Ua.ds(this.W.animationDuration)/1E3};a.Ni.prototype.mbb=function(){var b=this.W.animationOnDisplay,c=this.ob(),d=this.u(),e=new a.Z(0,0,this.wb,this.Nb);if(a.qc.isSupported(b))return a.qc.sF(d,b,this.Fa,
e,c);var f=[];if("popIn"==b)for(b=0;b<this.zu.length;b++){var h=this.zu[b];f.push(new a.Rt(d,h,!0,c))}else if("none"!=b){for(b=0;b<this.zu.length;b++){var h=this.zu[b],k=new a.kd(d,h,c),z,u;l.Gb(this)?(z=l.uxa(this)?this.wb:0,u=h.pk(),h.It(z),k.ka.O(a.G.V,h,h.pk,h.It,u)):(z=l.txa(this)?this.Nb:0,u=h.qk(),h.Jt(z),k.ka.O(a.G.V,h,h.qk,h.Jt,u));f.push(k)}f.push(a.qc.sF(d,a.qc.oD,this.Fa,e,c))}return 0<f.length?new a.nh(d,f):null};a.Ni.prototype.df=function(b){var c=this.D();c.highlightedCategories=a.bc.clone(b);
a.zh.df(b,this.sl(),"any"==c.highlightMatch)};a.Ni.prototype.select=function(b){this.D().selection=a.bc.clone(b);this.ad&&this.ad.Gt(b,this.sl())};a.Ni.prototype.mm=function(){return a.H.Ze(this.D(),"componentName",a.H.Ha,"PICTOCHART")};a.Ni.prototype.sh=function(){this.XHa||(this.XHa=new k(this));return this.XHa};a.v.F(k,a.Qd);k.prototype.Jn=function(a){return(a=this.pj.Ya().lb(a))&&a instanceof d?"item["+this.pj.sl().indexOf(a)+"]":null};k.prototype.th=function(b){if(b==a.Qd.qB)return this.AD(this.pj);
var c=b.indexOf("[");return 0<c&&"item"===b.substring(0,c)&&(b=parseInt(b.substring(c+1,b.length-1)),b=this.pj.sl()[b])?b.Qa():null};k.prototype.getItem=function(a){if(a=this.pj.sl()[a]){var b={};b.color=a.Tk();b.tooltip=a.Yd();b.id=a.getId();b.name=a.getName();b.count=a.getCount();b.selected=a.xb();return b}return null};k.prototype.QM=function(){return this.pj.sl().length};a.v.F(h,a.I);h.prototype.Dq=function(b,c,d){b=this.pj.D();"none"!=b.hoverBehavior&&(c=c.ee?c.ee():[],b.highlightedCategories=
d?c.slice():null,d=a.$a.iJ(b.highlightedCategories,d),c=a.Ua.ds(b.hoverBehaviorDelay),this.lK.cg(d,this.pj.sl(),c,"any"==b.highlightMatch))};h.prototype.MT=function(a){(a=this.lb(a.target))&&(a.tb&&a.tb()||this.Iy(a))};h.prototype.yG=function(a){(a=this.lb(a.target))&&a.tb&&a.tb()&&this.Iy(a)};h.prototype.UZ=function(a){(a=this.lb(a.target))&&(a.tb&&a.tb()||this.Iy(a))};h.prototype.nx=function(a){(a=this.lb(a.target))&&(a.tb&&a.tb()||this.Iy(a))};h.prototype.ZJ=function(a){var b=this.lb(a.target);
b&&b.tb&&b.tb()&&(a.preventDefault(),a.stopPropagation(),this.Iy(b))};h.prototype.Iy=function(b){b instanceof d&&b.uk()&&this.wl(a.$a.bga(b.getId()))};a.v.F(f,a.eb);f.oh={animationOnDisplay:"none",animationOnDataChange:"none",animationDuration:750,drilling:"off",hiddenCategories:[],highlightedCategories:[],highlightMatch:"all",hoverBehavior:"none",hoverBehaviorDelay:200,layout:"horizontal",layoutOrigin:"topStart",selection:[],selectionMode:"none",_defaultColor:"#a6acb1",_noneShapeColor:"rgba(255,255,255,0)",
_defaultSize:32,_defaultShape:"rectangle",_gapRatio:.25,_textStyle:new a.j(a.eb.d7+"color: #252525;"),_statusMessageStyle:new a.j(a.eb.d7+"color: #252525;"),_tooltipStyle:new a.j("border-collapse: separate; border-spacing: 1px"),_tooltipLabelStyle:new a.j("color: #666666; padding: 0px 2px"),_tooltipValueStyle:new a.j("color: #333333; padding: 0px 2px")};a.v.F(e,a.Af);e.prototype.xg=function(b,c){var d=new a.kd(this.u(),this,.75*this.pj.ob()),e=d.ka,f=this.kl();this.Mm(c.kl());e.O(a.G.Ef,this,this.kl,
this.Mm,f);c.U(0);b.add(d,1)};e.prototype.Uj=function(b){b.add(new a.bj(this.u(),this,.5*this.pj.ob()),0)};e.prototype.Xi=function(b){this.U(0);b.add(new a.lh(this.u(),this,.5*this.pj.ob()),2)};e.prototype.kl=function(){return[this.pk(),this.qk(),this.getWidth(),this.getHeight()]};e.prototype.Mm=function(a){this.It(a[0]);this.Jt(a[1]);this.Xa(a[2]);this.qb(a[3])};a.v.F(d,a.la);d.JB=0;d.prototype.Init=function(b,c){d.C.Init.call(this,b.u(),null,c.id);this.pj=b;this.Yn=c;this.Ac=null!=c.id?c.id:null!=
c.name?c.name:"_defaultId"+d.JB;d.JB++;this.VP="none"==c.shape;this.Yc=this.Vl=!1;this.QV=new a.R(0,0);(this.tb()||this.uk())&&this.setCursor("pointer");b.Ya().nb(this,this)};d.prototype.TTa=function(){var a=this.Yn.columnSpan;return null!=a&&0<=a?Math.round(a):1};d.prototype.wVa=function(){var a=this.Yn.rowSpan;return null!=a&&0<=a?Math.round(a):1};d.prototype.getCount=function(){var a=this.Yn.count;return null!=a?Math.max(a,0):1};d.prototype.Pc=function(){return this.Yn.shape||this.pj.D()._defaultShape};
d.prototype.gc=function(){return this.VP?this.pj.D()._noneShapeColor:this.Yn.color||this.pj.D()._defaultColor};d.prototype.io=function(){return this.Yn.borderColor};d.prototype.Sg=function(){return this.Yn.borderWidth};d.prototype.Vr=function(){return this.Yn.className};d.prototype.N=function(){return this.Yn.style};d.prototype.Q4=function(){return this.Yn.source};d.prototype.kwa=function(){return this.Yn.sourceSelected};d.prototype.iwa=function(){return this.Yn.sourceHover};d.prototype.jwa=function(){return this.Yn.sourceHoverSelected};
d.prototype.getName=function(){return this.Yn.name};d.prototype.getId=function(){return this.Ac};d.prototype.Yd=function(){return this.Yn.shortDesc};d.prototype.uk=function(){if(this.VP)return!1;var a=this.Yn.drilling;return a&&"inherit"!=a?"on"==a:"on"==this.pj.D().drilling};d.prototype.ul=function(){return this.tb()&&this.uk()&&!this.VP};d.prototype.fvb=function(){this.Wf("img");this.Ur()};d.prototype.Vf=function(){if(this.VP)return"";var b=this.pj.D(),c=this.pj.D().tooltip;if(c=c?c.renderer:null){var b=
this.pj.u().yf(),d={id:this.getId(),name:this.getName(),count:this.getCount(),color:this.gc()};return b.Mw(c,d)}if(null!=this.Yd())return this.Yd();c="";(d=this.getName())&&(c=a.Qe.tX("td",b._tooltipLabelStyle)+d+"\x3c/td\x3e");d=a.B.ba(this.pj.u());b._tooltipLabelStyle.ea(a.j.GG,d?"left":"right");b._tooltipValueStyle.ea(a.j.GG,d?"right":"left");return a.Qe.tX("table",b._tooltipStyle)+"\x3ctr\x3e"+c+a.Qe.tX("td",b._tooltipValueStyle)+this.Noa()+"\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e"};d.prototype.Tk=
function(){return this.gc()};d.prototype.Noa=function(){return a.H.Ze(this.pj.D(),"labelCountWithTotal",a.H.Ha,"COUNT_WITH_TOTAL",[this.getCount(),this.pj.Xob()])};d.prototype.tb=function(){return"none"!=this.pj.D().selectionMode&&!this.VP};d.prototype.xb=function(){return this.Vl};d.prototype.mc=function(a){this.Vl=a;this.Ur();for(var c=0;c<this.Pb();c++){var d=this.ib(c);(d instanceof b||d instanceof e)&&d.mc(a)}};d.prototype.qd=function(){for(var a=0;a<this.Pb();a++){var c=this.ib(a);(c instanceof
b||c instanceof e)&&c.qd()}};d.prototype.Lc=function(){for(var a=0;a<this.Pb();a++){var c=this.ib(a);(c instanceof b||c instanceof e)&&c.Lc()}};d.prototype.Te=function(){return[this]};d.prototype.sd=function(){var b=[],c=this.pj.D();this.tb()&&b.push(a.H.Ze(c,this.xb()?"stateSelected":"stateUnselected",a.H.Ha,this.xb()?"STATE_SELECTED":"STATE_UNSELECTED"));this.uk()&&b.push(a.H.Ze(c,"stateDrillable",a.H.Ha,"STATE_DRILLABLE"));c=this.getName();c=null!=this.Yd()?this.Yd():null==c?this.Noa():a.H.wa(a.H.Ha,
"COLON_SEP_LIST",[c,this.Noa()]);return a.oa.Sk(c,b)};d.prototype.Ur=function(){a.B.sj()||this.Id("label",this.sd())};d.prototype.ee=function(){return this.Yn.categories||[this.getId()]};d.prototype.Gd=function(b){var d=this.pj.Ya().Cb;return b.type==a.MouseEvent.De||d.cv(b)?this:d.Bi(b)?c.Gd(this.pj,this,b):null};d.prototype.uf=function(a){return this.aa(a)};d.prototype.cm=function(){return this.Qa()};d.prototype.Pf=function(){this.VP||(this.Yc=!0,this.qd())};d.prototype.Od=function(){this.VP||(this.Yc=
!1,this.Lc())};d.prototype.Hd=function(){return this.Yc};d.prototype.Lga=function(a){this.QV=a};d.prototype.Jea=function(){return this.QV};a.v.F(c,a.Cb);c.prototype.KF=function(a){return this.Bi(a)&&!a.ctrlKey};c.prototype.cv=function(b){return b.keyCode==a.KeyboardEvent.ui&&b.ctrlKey};c.Gd=function(b,d,e,f){var h=b.sl();f||(f=d);if("none"==d.Pc()&&d!=f){var k=a.na.kb(h,d);if(0==k||k==h.length-1)return f}var v=l.uxa(b),z=l.txa(b),u=l.Gb(b),k=d,v=e.keyCode==a.KeyboardEvent.Bf&&v||e.keyCode==a.KeyboardEvent.qf&&
!v||e.keyCode==a.KeyboardEvent.eh&&z||e.keyCode==a.KeyboardEvent.If&&!z,u=e.keyCode==a.KeyboardEvent.Bf&&u||e.keyCode==a.KeyboardEvent.qf&&u||e.keyCode==a.KeyboardEvent.eh&&!u||e.keyCode==a.KeyboardEvent.If&&!u,v=a.na.kb(h,d)+(v?1:-1);u?k=a.Cb.Gd(d,e,h):v<h.length&&0<=v&&(k=h[v]);"none"==k.Pc()&&(k=k!=d?c.Gd(b,k,e,f):f);return k};c.prototype.xk=function(b){var d=this.yb.tf();return d&&b.keyCode==a.KeyboardEvent.ej?(this.yb.Iy(d),a.I.tc(b),d):c.C.xk.call(this,b)};a.v.F(b,a.za);b.prototype.xg=function(b,
c){var d=new a.kd(this.u(),this,.75*this.pj.ob()),e=d.ka,f=this.jd();this.qa(c.jd().clone());e.O(a.G.vo,this,this.jd,this.qa,f);f=this.kl();this.Mm(c.kl());e.O(a.G.Ef,this,this.kl,this.Mm,f);c.U(0);b.add(d,1)};b.prototype.Uj=function(b){b.add(new a.bj(this.u(),this,.5*this.pj.ob()),0)};b.prototype.Xi=function(b){this.U(0);b.add(new a.lh(this.u(),this,.5*this.pj.ob()),2)};b.prototype.kl=function(){return[this.pk(),this.qk(),this.getWidth(),this.getHeight()]};b.prototype.Mm=function(a){this.It(a[0]);
this.Jt(a[1]);this.Xa(a[2]);this.qb(a[3])};var l={};a.v.F(l,a.v);l.ta=function(c,d,f,h){var k=c.u(),x=new a.Rect(k,f.x,f.y,f.a,f.b);x.Wb();d.A(x);h||(h=l.xp(c,f.a,f.b));if(h.items){c.tya(h.items);for(var x=c.D()._gapRatio*h.Mqb,v=l.Gb(c),z=l.txa(c),u=l.uxa(c),D=new a.qO,B=0,C=0,y=0,G=0;G<h.items.length;G++){var A=h.items[G],E=A.TTa(),L=A.wVa();if(!(0>=E||0>=L)){for(var R=E*h.Sda,O=L*h.uga,ja=A.getCount(),fa=0,da=!0,ia;0<ja;){if(E!=B||L!=C)y=0;0==y&&(ia=l.tKa(D,E,L,h.BSa,h.LXa,v));if(null==ia)break;
var na=ia.aua*h.Sda+R/2,W=ia.Cya*h.uga+O/2,na=f.x+(u?f.a-na:na),W=f.y+(z?f.b-W:W),X=Math.min(1-y,ja),U,S,Y,ca;v?(U=na-R/2,S=z?W+O*(.5-X-y):W+O*(y-.5),Y=R,ca=O*X):(U=u?na+R*(.5-X-y):na+R*(y-.5),S=W-O/2,Y=R*X,ca=O);var M;1==X?(M=A.getId()+"_"+fa,fa++):M=Math.random();if(A.Q4())M=new e(c,na,W,R,O,A.Q4(),A.kwa(),A.iwa(),A.jwa(),M+"_I");else{var oa=new a.Rect(k,U,S,Y,ca);oa.Wb();A.A(oa);M=new b(c,A.Pc(),na,W,R-h.Sda*x,O-h.uga*x,M+"_S");M.mb(A.gc());M.Ub(A.io(),null,A.Sg());M.FY(A.gc());M.ge(A.Vr());M.ea(A.N())}1>
X&&(oa=new a.wd,oa.Ce(U,S,Y,ca),M.he(oa));da&&(A.Lga(new a.R(na,W)),da=!1);A.A(M);c.Xrb(M);ja-=X;y=(y+X)%1}d.A(A);A.fvb();B=E;C=L}}}else l.Bp(c,d,f)};l.xp=function(b,c,e){var f=b.D(),h=f.items;if(!h)return{};for(var k=a.na.vR(f.hiddenCategories),v=[],z=0,u=1,D=1,B=Infinity,C=0;C<h.length;C++)if(null!=h[C]){var y=new d(b,h[C]);if(!k||!a.na.dY(k,y.ee())){var G=y.TTa(),A=y.wVa();0>=G||0>=A||(G>u&&(u=G),A>D&&(D=A),G<B&&(B=G),A<B&&(B=A),z+=G*A*y.getCount(),v.push(y))}}if(0==z)return{};h=f.columnWidth;
k=f.rowHeight;c&&e||(h||(h=k?k:f._defaultSize),k||(k=h));b=l.Gb(b);C=f.columnCount;f=f.rowCount;C||f||(c&&e?b?f=l.SU(Math.sqrt(z*e/c),D):C=l.SU(Math.sqrt(z*c/e),u):c?C=Math.max(Math.floor(c/h),1):e?f=Math.max(Math.floor(e/k),1):b?f=l.SU(Math.sqrt(z),D):C=l.SU(Math.sqrt(z),u));C?f||(f=l.SU(z/C,D)):C=l.SU(z/f,u);c&&e&&(h||(h=k?k:Math.min(c/C,e/f)),k||(k=h));return 0>=C||0>=f||0>=h||0>=k?{}:{items:v,BSa:C,LXa:f,Sda:h,uga:k,Mqb:B}};l.SU=function(a,b){return Math.ceil(a/b)*b};l.tKa=function(a,b,c,d,e,
f){if(f)return(a=l.tKa(a,c,b,e,d,!1))?{aua:a.Cya,Cya:a.aua}:null;for(f=0;f<e-c+1;f++)for(var h=0;h<d-b+1;h++)if(l.h9a(a,h,f,b,c))return l.Heb(a,h,f,b,c),{aua:h,Cya:f};return null};l.h9a=function(a,b,c,d,e){for(var f=0;f<e;f++)for(var h=0;h<d;h++)if(a.get(b+h,c+f))return!1;return!0};l.Heb=function(a,b,c,d,e){for(var f=0;f<e;f++)for(var h=0;h<d;h++)a.put(b+h,c+f,!0)};l.Bp=function(b,c,d){var e=b.D(),f=a.H.Ze(e,"labelNoData",a.H.Ha,"NO_DATA");c=a.Ca.Bp(c,f,d.clone(),b.Ya(),e._statusMessageStyle);b.Wrb(c)};
l.Gb=function(a){return"vertical"==a.D().layout};l.txa=function(a){a=a.D().layoutOrigin;return"bottomStart"==a||"bottomEnd"==a};l.uxa=function(b){var c=b.D().layoutOrigin,c="topEnd"==c||"bottomEnd"==c;return a.B.ba(b.u())?!c:c};a.Ia(a,"PictoChart",a.Ni);a.Ia(a.Ni,"newInstance",a.Ni.newInstance);a.Ia(a.Ni.prototype,"destroy",a.Ni.prototype.ya);a.Ia(a.Ni.prototype,"getAutomation",a.Ni.prototype.sh);a.Ia(a.Ni.prototype,"highlight",a.Ni.prototype.df);a.Ia(a.Ni.prototype,"render",a.Ni.prototype.ta);a.Ia(a.Ni.prototype,
"select",a.Ni.prototype.select);a.Ia(k.prototype,"getDomElementForSubId",k.prototype.th);a.Ia(k.prototype,"getItem",k.prototype.getItem);a.Ia(k.prototype,"getItemCount",k.prototype.QM)})(dvt);
  return dvt;
});
